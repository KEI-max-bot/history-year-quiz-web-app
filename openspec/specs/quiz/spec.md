# Quiz Specification

## Purpose
ユーザーが世界史の年号を一問一答形式で学習できるクイズ機能を提供する。

## Requirements

### Requirement: クイズの開始
システムはユーザーがクイズを開始できるようにしなければならない。

#### Scenario: カテゴリ選択してクイズ開始
- GIVEN ユーザーがクイズモードにいる
- WHEN ユーザーがカテゴリを選択して「クイズを始める」ボタンを押す
- THEN システムは選択されたカテゴリの問題をランダムな順序で出題する

#### Scenario: 全カテゴリでクイズ開始
- GIVEN ユーザーがクイズモードにいる
- WHEN ユーザーがカテゴリ「すべて」を選択してクイズを開始する
- THEN システムは全ての年号データからランダムに出題する

---

### Requirement: 問題の表示
システムは出来事を表示し、ユーザーに年号を入力させなければならない。

#### Scenario: 問題表示
- GIVEN クイズが進行中である
- WHEN 新しい問題が表示される
- THEN システムは出来事名を表示し、年号入力欄をフォーカスする

#### Scenario: 画像付き問題
- GIVEN 問題に画像データが存在する
- WHEN 問題が表示される
- THEN システムは出来事名と共に関連画像を表示する

---

### Requirement: 回答の判定
システムはユーザーの回答を正誤判定しなければならない。

#### Scenario: 正解の場合
- GIVEN ユーザーが年号を入力している
- WHEN 入力した年号が正解と一致する
- THEN システムは「正解」を表示し、正解数をカウントアップする

#### Scenario: 不正解の場合
- GIVEN ユーザーが年号を入力している
- WHEN 入力した年号が正解と一致しない
- THEN システムは「不正解」と正しい年号を表示する

#### Scenario: 紀元前の入力
- GIVEN 正解が紀元前の年号である
- WHEN ユーザーが負の数または「BC」付きで入力する
- THEN システムは適切に紀元前として判定する

---

### Requirement: 解答履歴の表示
システムは解答履歴を表示しなければならない。

#### Scenario: 履歴の記録
- GIVEN クイズが進行中である
- WHEN ユーザーが回答する
- THEN システムは回答結果（正誤、出来事名、正解年号）を履歴に追加する

#### Scenario: 履歴の色分け
- GIVEN 解答履歴が表示されている
- WHEN 正解の場合
- THEN 緑色の背景で表示する
- WHEN 不正解の場合
- THEN 赤色の背景で表示する

---

### Requirement: クイズの終了
システムはクイズ終了時に結果を表示しなければならない。

#### Scenario: 全問終了
- GIVEN クイズの最後の問題に回答した
- WHEN 回答が完了する
- THEN システムは最終スコア（正解数/全問数）を表示する

#### Scenario: 途中終了
- GIVEN クイズが進行中である
- WHEN ユーザーが「終了」ボタンを押す
- THEN システムはクイズを終了し、その時点のスコアを表示する
